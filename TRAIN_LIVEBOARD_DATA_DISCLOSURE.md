# 台鐵即時看板 - 數據來源說明與重要警示

## 📋 更新內容

於 `train-liveboard.html` 資訊面板中新增完整的數據延遲和來源說明，確保用戶充分了解數據特性和使用限制。

## ⏱️ 關鍵信息 - 2 分鐘延遲

### 重要提示
本看板資料延遲約 **2 分鐘**，不是即時直播資料。

### 為什麼有延遲？

1. **數據來源**
   - 本看板資料來自交通部 TDX 交通資料流通服務平台
   - 不是直接的台鐵內部即時系統

2. **數據轉換過程**
   - 台鐵提供：日常時刻表 + 即時列車延誤資訊
   - TDX 處理：結合時刻表和延誤資訊，轉換成車站別、方向別的到離站資料
   - 資料輸出：以「StationLiveBoard」格式提供前後 30 分鐘列車資訊
   - 本看板：進一步篩選和組織成用戶友善的表格形式

3. **系統延遲**
   - TDX 平台資料處理與傳輸需時
   - 本看板每 2 分鐘自動更新一次
   - 整體延遲約 2 分鐘

## ⚠️ 與站內 TIDS 顯示的差異

### 數據來源不同

```
台鐵內部系統
    ↓
TDX API (延遲 ~2 分鐘)
    ↓
本看板 (本地處理)
    ↑
    └─ 與站內 TIDS 無法保證同步
    
車站 TIDS 月台顯示
    ↑
    └─ 直接來自車站系統，更即時
```

### 可能的差異原因

1. **數據源不同**
   - 本看板：TDX 轉換後的數據
   - TIDS：站內直接系統

2. **更新頻率不同**
   - 本看板：每 2 分鐘更新
   - TIDS：可能更頻繁更新

3. **顯示邏輯不同**
   - 本看板：固定前後 30 分鐘
   - TIDS：可能有不同的時間範圍

## 👥 使用建議

### 適用場景
- ✅ 了解車次到離狀態
- ✅ 規劃行程和出發時間
- ✅ 一般查詢和參考
- ✅ 數據分析和統計

### 不適用場景
- ❌ **不應該作為出發決策的唯一依據**
- ❌ 不適合要求精確到秒的應用
- ❌ 不適合高度敏感的時間相關決策

### 最佳實踐

1. **查詢階段**
   - 使用本看板查看列車狀況
   - 了解大致的到離時間

2. **進站階段**
   - 直接進入車站月台區域
   - **以站內 TIDS 月台顯示為主**

3. **異常情況**
   - 遇到延誤或其他異常
   - 詢問站務人員最新狀況

## 🔧 技術詳細信息

### TDX 資料轉換流程

```
步驟 1: 台鐵提供
├─ 日常時刻表（每班列車計畫時間）
└─ 即時列車延誤資訊（實時動態）

步驟 2: TDX 處理
├─ 結合時刻表和延誤資訊
├─ 根據列車方向和車站計算
└─ 轉換成車站別、方向別的資料

步驟 3: 資料輸出
├─ 格式：StationLiveBoard API
├─ 範圍：當前時間前後 30 分鐘
└─ 頻率：TDX 定期更新

步驟 4: 本看板處理
├─ 獲取 TDX 資料
├─ 進行篩選和排序
├─ 用戶友善的表格呈現
└─ 異常檢測和警示
```

### 名詞解釋

| 名詞 | 說明 |
|------|------|
| **TDX** | 交通部「交通資料流通服務」平台，提供政府交通數據 |
| **TIDS** | 車站月台上的「列車即時到離站電子看板」 |
| **StationLiveBoard** | TDX 提供的車站別列車即時資料 API 端點 |
| **列車即時準點/誤點資料** | 台鐵官方的實時列車延誤信息 |
| **車站別列車即時到離站資料** | 轉換後的站點相關列車到離資訊 |

## 📚 相關資源

- 🔗 [TDX 交通資料流通服務平台](https://tdx.transportdata.tw)
- 🔗 [台灣鐵路管理局官方網站](https://www.tra.gov.tw)

## 📄 法律免責聲明

本看板係基於 TDX 平台提供的公開資料進行展示和分析，旨在提供參考信息。用戶使用本看板時應自行判斷，不應將其作為唯一的決策依據。對於因使用本看板資料而導致的任何損失或不便，本看板及其開發者概不負責。

## 🔄 更新日誌

### v1.1 - 數據來源說明加強版
- 新增重要警示：2 分鐘數據延遲
- 詳細解釋 TIDS vs TDX 的差異
- 完整的 TDX 資料轉換流程說明
- 增強的深色模式支持
- 新增可展開的技術細節區域
- 改進的視覺設計和信息層級

**變更位置**：`train-liveboard.html` - 資訊面板（infoPanel）

## 🎨 視覺設計改進

### 亮色模式
- 主要警告框：黃色背景，表示數據延遲提示
- TIDS 差異框：紫色背景，表示重要差異說明
- 整體面板：綠色漸層背景 + 紅色左邊框，表示需要注意

### 深色模式
- 警告框：自動調整顏色以適應深色背景
- 整體面板：深灰色漸層背景 + 紅色左邊框
- 確保在深色模式下同樣醒目和易讀

## ✅ 用戶體驗改進

1. **信息層級清晰**
   - 最重要的信息（延遲警示）在最上方
   - 技術細節可選展開，不影響主要信息

2. **易於掃讀**
   - 使用 emoji 快速辨識主題
   - 粗體和顏色強調關鍵詞
   - 適當的間距和分段

3. **視覺醒目**
   - 紅色邊框和警告背景吸引注意
   - 在深色模式下同樣有效
   - 響應式設計支持所有設備

## 🔍 驗證清單

- ✅ 資訊面板內容完整
- ✅ 包含 2 分鐘延遲警示
- ✅ 包含 TIDS vs TDX 差異說明
- ✅ 包含 TDX 轉換流程詳解
- ✅ 包含使用建議和最佳實踐
- ✅ 包含相關資源連結
- ✅ CSS 樣式完整
- ✅ 深色模式支持完善
- ✅ 代碼無語法錯誤
- ✅ 響應式設計適配所有設備

---

**文件作者**：GitHub Copilot  
**最後更新**：2024  
**版本**：1.1 - 數據來源說明加強版
