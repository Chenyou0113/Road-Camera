<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>çœé“ç¯©é¸é‚è¼¯æ¸¬è©¦</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .pass { background-color: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .fail { background-color: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .sample { background-color: #e2e3e5; padding: 5px; margin: 5px 0; }
    </style>
</head>
<body>
    <h1>çœé“ç¯©é¸é‚è¼¯æ¸¬è©¦</h1>
    <div id="results"></div>
    
    <script>
        // å¿«é€Ÿé“è·¯åˆ—è¡¨ï¼ˆç”¨æ–¼æ’é™¤ï¼‰
        const EXPRESSWAYS = [
            'å°61', 'å°62', 'å°63', 'å°64', 'å°65', 'å°66', 'å°68', 
            'å°72', 'å°74', 'å°76', 'å°78', 'å°82', 'å°84', 'å°86', 'å°88'
        ];
        
        // åˆ¤æ–·æ˜¯å¦ç‚ºçœé“ï¼ˆæ’é™¤åœ‹é“å’Œå¿«é€Ÿé“è·¯ï¼‰
        function isProvincialRoad(camera) {
            const roadName = camera.RoadName || '';
            const locationDesc = camera.LocationDescription || '';
            const cctvId = camera.CCTVID || '';
            const allText = `${roadName} ${locationDesc}`;
            
            // æ’é™¤åœ‹é“ï¼ˆç·¨è™Ÿä»¥ CCTV-N é–‹é ­ï¼‰
            if (cctvId.startsWith('CCTV-N')) {
                return false;
            }
            
            // æ’é™¤æ˜ç¢ºæ¨™ç¤ºç‚ºåœ‹é“çš„
            if (allText.includes('åœ‹é“')) {
                return false;
            }
            
            // åŒ¹é…çœé“æ ¼å¼ï¼šå°1ç·šã€å°9ç”²ç·šç­‰
            const match = allText.match(/[å°è‡º](\d+)([ç”²ä¹™ä¸™ä¸]?)ç·š?/);
            if (match) {
                const roadNum = parseInt(match[1]);
                const roadCode = `å°${match[1]}`;
                
                // æ’é™¤å¿«é€Ÿé“è·¯
                if (EXPRESSWAYS.includes(roadCode)) {
                    return false;
                }
                
                // çœé“é€šå¸¸ç·¨è™Ÿåœ¨ 1-200 ç¯„åœå…§
                if (roadNum >= 1 && roadNum <= 200) {
                    return true;
                }
            }
            
            return false;
        }
        
        // æ¸¬è©¦è³‡æ–™
        const testCameras = [
            // åœ‹é“ - æ‡‰è©²è¢«æ’é™¤
            { CCTVID: 'CCTV-N1-S-0.000-M', RoadName: 'åœ‹é“1è™Ÿ', LocationDescription: 'åŸºéš†å¸‚' },
            { CCTVID: 'CCTV-N3-N-1.500-M', RoadName: 'åœ‹é“3è™Ÿ', LocationDescription: 'åœŸåŸå€' },
            
            // çœé“ - æ‡‰è©²ä¿ç•™
            { CCTVID: 'CCTV-T1-001', RoadName: 'å°1ç·š', LocationDescription: 'å°åŒ—å¸‚' },
            { CCTVID: 'CCTV-T9-002', RoadName: 'å°9ç·š', LocationDescription: 'æ–°åŒ—å¸‚' },
            { CCTVID: 'CCTV-T3A-003', RoadName: 'å°3ç”²ç·š', LocationDescription: 'æ¡ƒåœ’å¸‚' },
            
            // å¿«é€Ÿé“è·¯ - æ‡‰è©²è¢«æ’é™¤
            { CCTVID: 'CCTV-T61-004', RoadName: 'å°61ç·š', LocationDescription: 'è¥¿æ¿±å¿«é€Ÿé“è·¯' },
            { CCTVID: 'CCTV-T74-005', RoadName: 'å°74ç·š', LocationDescription: 'ä¸­å½°å¿«é€Ÿé“è·¯' },
            
            // é‚Šç•Œæ¸¬è©¦
            { CCTVID: 'CCTV-T15-006', RoadName: 'å°15ç·š', LocationDescription: 'é—œæ¸¡å¤§æ©‹' },
            { CCTVID: 'CCTV-OTHER-007', RoadName: 'å…¶ä»–é“è·¯', LocationDescription: 'æ¸¬è©¦' }
        ];
        
        const results = document.getElementById('results');
        
        function addResult(message, className = '') {
            const div = document.createElement('div');
            div.className = `test ${className}`;
            div.innerHTML = message;
            results.appendChild(div);
        }
        
        // åŸ·è¡Œæ¸¬è©¦
        let passCount = 0;
        let totalCount = testCameras.length;
        
        addResult('<strong>é–‹å§‹æ¸¬è©¦çœé“ç¯©é¸é‚è¼¯...</strong>');
        
        testCameras.forEach((camera, index) => {
            const isProvincial = isProvincialRoad(camera);
            const expected = camera.CCTVID.includes('CCTV-T') && 
                           !camera.CCTVID.includes('CCTV-N') && 
                           !camera.RoadName.includes('61ç·š') && 
                           !camera.RoadName.includes('74ç·š') &&
                           !camera.RoadName.includes('å…¶ä»–é“è·¯');
            
            const testPass = isProvincial === expected;
            if (testPass) passCount++;
            
            addResult(`
                <div class="sample">
                    <strong>æ¸¬è©¦ ${index + 1}:</strong> ${camera.CCTVID}<br>
                    é“è·¯: ${camera.RoadName}<br>
                    ä½ç½®: ${camera.LocationDescription}<br>
                    çµæœ: ${isProvincial ? 'âœ… çœé“' : 'âŒ éçœé“'}<br>
                    é æœŸ: ${expected ? 'çœé“' : 'éçœé“'}
                </div>
            `, testPass ? 'pass' : 'fail');
        });
        
        addResult(`<strong>æ¸¬è©¦å®Œæˆ: ${passCount}/${totalCount} é€šé (${Math.round(passCount/totalCount*100)}%)</strong>`, 
                 passCount === totalCount ? 'pass' : 'fail');
        
        if (passCount === totalCount) {
            addResult('ğŸ‰ æ‰€æœ‰æ¸¬è©¦é€šéï¼çœé“ç¯©é¸é‚è¼¯å·¥ä½œæ­£å¸¸ã€‚', 'pass');
        } else {
            addResult('âš ï¸ éƒ¨åˆ†æ¸¬è©¦å¤±æ•—ï¼Œéœ€è¦èª¿æ•´ç¯©é¸é‚è¼¯ã€‚', 'fail');
        }
    </script>
</body>
</html>