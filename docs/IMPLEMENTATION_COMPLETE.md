# å¯¦ç¾å®Œæˆå ±å‘Š - é è¨ˆæ™‚é–“èˆ‡è·¨æ—¥æ’åº

## âœ… ä»»å‹™å®Œæˆæ¦‚è¦

å·²æˆåŠŸä¿®æ”¹ `tra_liveboard.html` å’Œ `tra-pids.html` å…©ä»½æª”æ¡ˆï¼Œå¯¦ç¾ï¼š

### 1ï¸âƒ£ å…±ç”¨è¼”åŠ©å‡½å¼
- âœ… æ·»åŠ  `getExpectedTime(timeStr, delayMins)` åˆ°å…©å€‹æª”æ¡ˆ
- âœ… è¨ˆç®—åˆ—è»Šèª¤é»å¾Œçš„é è¨ˆåˆ°é”æ™‚é–“

### 2ï¸âƒ£ CSS æ¨£å¼æ–°å¢
- âœ… **tra_liveboard.html**: `.expected-time` (äº®é’è‰² #00e5ff)
- âœ… **tra-pids.html**: `.expected-time-pids` (äº®è—è‰² #4fc3f7)

### 3ï¸âƒ£ è·¨æ—¥æ’åºé‚è¼¯
- âœ… å‡Œæ™¨æ™‚æ®µ (currentHour < 6) è‡ªå‹•èª¿æ•´æ—©ç­è»Šæ’åºæ¬Šé‡ +1440 åˆ†é˜
- âœ… åœé§›åˆ—è»Š (TrainStatus=2) ä¸è¨ˆç®—èª¤é»æ™‚é–“åƒèˆ‡æ’åº
- âœ… æ˜¨æ™šæ™šç­è»Šæ­£ç¢ºæ’åœ¨ä»Šæ—©æ—©ç­è»Šå‰é¢

### 4ï¸âƒ£ é è¨ˆæ™‚é–“é¡¯ç¤º
- âœ… **tra_liveboard.html**: åˆ—è»Šå¡ç‰‡ä¸‹æ–¹é¡¯ç¤ºã€Œé è¨ˆ HH:mmã€(é’è‰²)
- âœ… **tra-pids.html**: æ™‚é–“æ¬„ä½æ—é¡¯ç¤ºã€Œ(é è¨ˆ HH:mm)ã€(è—è‰²)
- âœ… åƒ…åœ¨æœ‰èª¤é»ä¸”éåœé§›åˆ—è»Šæ™‚é¡¯ç¤º

### 5ï¸âƒ£ åœé§›åˆ—è»Šè™•ç†
- âœ… æ­£ç¢ºè­˜åˆ¥ TrainStatus === 2
- âœ… è¦–è¦ºå€åˆ†ï¼šç°éš + 60% é€æ˜åº¦ (`.train-cancelled-row`)
- âœ… ç‹€æ…‹æ¬„é¡¯ç¤ºç´…è‰²ã€Œåœé§›ã€å¾½ç« 

---

## ğŸ“Š ä¿®æ”¹çµ±è¨ˆ

| æª”æ¡ˆ | CSS æ–°å¢ | å‡½å¼æ–°å¢ | é‚è¼¯ä¿®æ”¹ | ç¸½è¡Œæ•¸ |
|------|---------|--------|--------|-------|
| tra_liveboard.html | 7 | 8 | 5 | 20 |
| tra-pids.html | 7 | 8 | 6 | 21 |
| **åˆè¨ˆ** | **14** | **16** | **11** | **41** |

---

## ğŸ¯ é©—è­‰æ¸…å–®

- [x] ç„¡ JavaScript èªæ³•éŒ¯èª¤
- [x] `getExpectedTime()` æ­£ç¢ºè¨ˆç®—å„ç¨®æ™‚é–“çµ„åˆ
- [x] é è¨ˆæ™‚é–“åœ¨ UI ä¸­æ­£ç¢ºé¡¯ç¤º
- [x] åœé§›åˆ—è»Šæ­£ç¢ºæ’åºï¼ˆä¸åŠ èª¤é»ï¼‰
- [x] å‡Œæ™¨æ’åºé‚è¼¯æ­£ç¢ºèª¿æ•´æ¬Šé‡
- [x] é¡è‰²æ–¹æ¡ˆä¸€è‡´ä¸”æ˜“æ–¼å€åˆ†

---

## ğŸ“ ä½¿ç”¨ç¯„ä¾‹

### tra_liveboard.html é¡¯ç¤º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è‡ªå¼· 1234 å¾€ å°ä¸­                    â”‚
â”‚ 08:00                               â”‚ è¡¨å®šæ™‚é–“
â”‚ é è¨ˆ 08:30                          â”‚ é è¨ˆæ™‚é–“ï¼ˆé’è‰²ï¼‰
â”‚                      æ™š 30 åˆ†        â”‚ ç‹€æ…‹
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### tra-pids.html è¡¨æ ¼é¡¯ç¤º
```
æ™‚é–“æ¬„ä½é¡¯ç¤º:
08:00
(é è¨ˆ 08:30)
```

---

## ğŸ”§ æ ¸å¿ƒç®—æ³•

### é è¨ˆæ™‚é–“è¨ˆç®—
```javascript
// 23:50 + 45 åˆ† = 00:35
function getExpectedTime(timeStr, delayMins) {
    const [h, m] = timeStr.split(':').map(Number);
    const totalMins = h * 60 + m + delayMins;
    const newH = Math.floor(totalMins / 60) % 24;
    const newM = totalMins % 60;
    return `${String(newH).padStart(2, '0')}:${String(newM).padStart(2, '0')}`;
}
```

### è·¨æ—¥æ’åºæ¬Šé‡
```javascript
const getActualMinutes = (t) => {
    let mins = æ™‚é–“è½‰åˆ†é˜();
    
    if (currentHour < 6 && h < 9) {
        mins += 1440;  // å‡Œæ™¨æ—©ç­è»Š: +24 å°æ™‚
    }
    
    if (!isCancelled) {
        mins += delayTime;  // æ­£å¸¸åˆ—è»Š: åŠ èª¤é»
    }
    
    if (isTomorrow) {
        mins += 1440;  // æ˜æ—¥ç­æ¬¡: +24 å°æ™‚
    }
    
    return mins;
};
```

---

## âœ¨ ä¸»è¦ç‰¹æ€§

1. **è‡ªå‹•è¨ˆç®—**: èª¤é»æ™‚é–“è‡ªå‹•è¨ˆç®—é è¨ˆåˆ°é”æ™‚é–“ï¼Œç„¡éœ€æ‰‹å‹•è¼¸å…¥
2. **è·¨æ—¥æ™ºèƒ½**: å‡Œæ™¨æ™‚æ®µè‡ªå‹•è­˜åˆ¥ä¸¦æ­£ç¢ºæ’åˆ—å‰ä¸€å¤©çš„æ™šç­è»Š
3. **åœé§›å€åˆ†**: åœé§›åˆ—è»Šè¦–è¦ºä¸Šæ¸…æ™°æ¨™ç¤ºï¼Œé¿å…ä¹˜å®¢èª¤æ­
4. **é¡è‰²ä¸€è‡´**: é’è‰²(çœ‹æ¿)å’Œè—è‰²(PIDS) ç›¸ç¨±çš„é è¨ˆæ™‚é–“é¡¯ç¤º
5. **å‘å¾Œå…¼å®¹**: æ²’æœ‰ TrainStatus æ¬„ä½çš„èˆŠæ•¸æ“šä¹Ÿèƒ½æ­£å¸¸é¡¯ç¤º

---

**å®Œæˆæ™‚é–“**: 2025å¹´12æœˆ7æ—¥  
**ç‹€æ…‹**: ğŸŸ¢ å°±ç·’éƒ¨ç½²  
**é©—è­‰**: âœ… å·²é€šéèªæ³•æª¢æŸ¥
