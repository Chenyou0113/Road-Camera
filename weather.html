<!DOCTYPE html>
<html lang='zh-TW'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<title>æ°£è±¡æŸ¥è©¢</title>
<style>
body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);margin:0;padding:0}
header{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:20px;text-align:center}
h1{margin:0;font-size:28px}
.container{max-width:1200px;margin:20px auto;padding:0 20px}
.btn-group{display:flex;flex-wrap:wrap;gap:8px;margin:20px 0}
.btn{padding:8px 16px;background:white;color:#667eea;border:2px solid #667eea;border-radius:20px;cursor:pointer;font-weight:600}
.btn.active{background:#667eea;color:white}
.weather-box{background:white;border-radius:15px;padding:30px;margin:20px 0;box-shadow:0 4px 15px rgba(0,0,0,0.1)}
.temp-display{font-size:48px;font-weight:bold;color:#667eea;margin:20px 0}
.forecast-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:15px;margin:20px 0}
.forecast-item{background:linear-gradient(135deg,#f5f7fa,#c3cfe2);border-radius:10px;padding:15px;text-align:center}
</style>
</head>
<body>
<header>
<h1>ğŸŒ¤ï¸ æ°£è±¡æŸ¥è©¢</h1>
<a href='index.html' style='color:white;text-decoration:none'>â† è¿”å›é¦–é </a>
</header>
<div class='container'>
<div class='btn-group' id='counties'></div>
<div id='weather' class='weather-box'><p>è¼‰å…¥ä¸­...</p></div>
</div>
<script>
const COUNTIES=['è‡ºåŒ—å¸‚','æ–°åŒ—å¸‚','æ¡ƒåœ’å¸‚','è‡ºä¸­å¸‚','è‡ºå—å¸‚','é«˜é›„å¸‚','åŸºéš†å¸‚','æ–°ç«¹å¸‚','å˜‰ç¾©å¸‚','æ–°ç«¹ç¸£','è‹—æ —ç¸£','å½°åŒ–ç¸£','å—æŠ•ç¸£','é›²æ—ç¸£','å˜‰ç¾©ç¸£','å±æ±ç¸£','å®œè˜­ç¸£','èŠ±è“®ç¸£','è‡ºæ±ç¸£','é‡‘é–€ç¸£','æ¾æ¹–ç¸£','é€£æ±Ÿç¸£'];
const API='https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=CWA-675CED45-09DF-4249-9599-B9B5A5AB761A';
let county='è‡ºåŒ—å¸‚';
let data=null;

function initBtns(){const c=document.getElementById('counties');c.innerHTML=COUNTIES.map(x=><button class='btn 'onclick='switchCounty(\"\")'></button>).join('')}
function switchCounty(c){county=c;initBtns();render()}
async function loadData(){try{const r=await fetch(API);data=await r.json();render()}catch(e){document.getElementById('weather').innerHTML='<p>éŒ¯èª¤:'+e.message+'</p>'}}
function render(){if(!data)return;const loc=data.records.location.find(x=>x.locationName===county);if(!loc){document.getElementById('weather').innerHTML='<p>ç„¡è³‡æ–™</p>';return}const items={};loc.weatherElement.forEach(e=>{if(e.time)e.time.forEach(t=>{items[t.dataTime]=items[t.dataTime]||{};items[t.dataTime][e.elementName]=t.elementValue})});const times=Object.keys(items).sort();const curr=items[times[0]]||{};let html='<div><div class="temp-display">'+curr.Temp+'Â°C</div><p>'+curr.Wx+'</p><p>æº¼åº¦:'+curr.RH+'% é¢¨é€Ÿ:'+curr.WS+'m/s</p></div><div class="forecast-grid">';times.slice(0,8).forEach(t=>{const it=items[t];const d=new Date(t);html+='<div class="forecast-item"><div>'+d.getMonth()+1+'/'+d.getDate()+'</div><div>'+it.Wx+'</div><div>'+it.Temp+'Â°</div></div>'});html+='</div>';document.getElementById('weather').innerHTML=html}
window.onload=()=>{initBtns();loadData()}
</script>
</body>
</html>
